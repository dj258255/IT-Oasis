---
import BaseLayout from '../layouts/BaseLayout.astro';
import { projects } from '../data/projects';
import { base, assetPath, getSiteSettings } from '../lib/config';

const siteSettings = getSiteSettings();
---

<BaseLayout title="Projects — IT Oasis">
  <div class="fade-in-up mb-10 sm:mb-14">
    <div class="px-1">
      <h1 class="text-4xl sm:text-5xl font-bold tracking-tight mb-5">
        <span class="gradient-text" data-ko="프로젝트" data-en="Projects">프로젝트</span>
      </h1>
      <p class="text-[20px] sm:text-[24px] text-gray-600 dark:text-gray-400 leading-relaxed max-w-lg">
        <span class="lang-ko" set:html={(siteSettings.projectsSubtitleKo || '').replace(/\n/g, '<br />')} />
        <span class="lang-en hidden" set:html={(siteSettings.projectsSubtitleEn || '').replace(/\n/g, '<br />')} />
      </p>
    </div>
  </div>

  <!-- Project cards -->
  <div class="space-y-8 sm:space-y-10 stagger">
    {projects.map((project) => (
      <div class="project-card group">
        <div class="flex flex-col sm:flex-row gap-6 sm:gap-10">
          <!-- Image -->
          <div class="sm:w-[300px] md:w-[360px] shrink-0">
            <div class="aspect-[4/3] rounded-xl sm:rounded-2xl overflow-hidden bg-gradient-to-br from-gray-100 to-gray-50 dark:from-gray-800/50 dark:to-gray-900/50 relative flex items-center justify-center">
              {project.image && (
                <img
                  src={assetPath(project.image)}
                  alt=""
                  class="w-full h-full object-fill transition-transform duration-700 ease-out absolute inset-0 group-hover:scale-105"
                  loading="lazy"
                  onerror="this.style.display='none'"
                />
              )}
              <svg class="w-12 h-12 text-gray-200 dark:text-gray-700" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="0.8">
                <path stroke-linecap="round" stroke-linejoin="round" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
              </svg>
              {/* Hover overlay with action buttons */}
              <div class="absolute inset-0 flex items-center justify-center bg-black/55 backdrop-blur-[8px] opacity-0 group-hover:opacity-100 transition-opacity duration-350 z-10 rounded-[inherit]">
                <div class="flex flex-col gap-2.5 w-[80%] max-w-[240px]">
                  {project.website && (
                    <a href={project.website} target="_blank" rel="noopener noreferrer" class="flex items-center justify-between py-2.5 px-4 rounded-xl bg-white/95 text-[#1d1d1f] text-[13px] font-semibold no-underline shadow-sm hover:bg-white hover:-translate-y-px hover:shadow-md transition-all duration-200">
                      <span data-ko="웹사이트 접속하기" data-en="Visit Website">웹사이트 접속하기</span>
                      <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" /></svg>
                    </a>
                  )}
                  {project.github && (
                    <a href={project.github} target="_blank" rel="noopener noreferrer" class="flex items-center justify-between py-2.5 px-4 rounded-xl bg-white/95 text-[#1d1d1f] text-[13px] font-semibold no-underline shadow-sm hover:bg-white hover:-translate-y-px hover:shadow-md transition-all duration-200">
                      <span data-ko="깃허브 보기" data-en="View GitHub">깃허브 보기</span>
                      <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" /></svg>
                    </a>
                  )}
                  {project.story && (
                    <a href={`${base}${project.story}`} class="flex items-center justify-between py-2.5 px-4 rounded-xl bg-white/95 text-[#1d1d1f] text-[13px] font-semibold no-underline shadow-sm hover:bg-white hover:-translate-y-px hover:shadow-md transition-all duration-200">
                      <span data-ko="스토리 보기" data-en="View Stories">스토리 보기</span>
                      <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" /></svg>
                    </a>
                  )}
                </div>
              </div>
            </div>
          </div>

          <!-- Content -->
          <div class="flex-1 flex flex-col justify-center">
            <h2 class="text-[22px] sm:text-[28px] font-bold tracking-tight mb-4 group-hover:text-primary dark:group-hover:text-primary-light transition-colors duration-300" data-ko={project.title} data-en={project.titleEn}>
              {project.title}
            </h2>

            <p class="text-[15px] sm:text-[17px] text-gray-500 dark:text-gray-400 leading-relaxed mb-6">
              <span class="lang-ko">{project.description}</span>
              <span class="lang-en hidden">{project.descriptionEn || project.description}</span>
            </p>

            <!-- Tags -->
            <div class="flex flex-wrap gap-2">
              {project.tags.map((tag) => (
                <span class="project-tag">{tag}</span>
              ))}
            </div>
          </div>
        </div>
      </div>
    ))}
  </div>

</BaseLayout>

<style>
  .project-card {
    padding: 0 !important;
    background: none !important;
    border: none !important;
    box-shadow: none !important;
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
    transition: transform 0.5s cubic-bezier(0.16, 1, 0.3, 1);
  }

  .project-card:hover {
    transform: translateY(-4px);
    background: none !important;
    border: none !important;
    box-shadow: none !important;
  }


  /* Project tech tags */
  .project-tag {
    display: inline-block;
    font-size: 13px;
    font-weight: 600;
    letter-spacing: 0.02em;
    padding: 0.4rem 0.9rem;
    border-radius: 10px;
    background: rgba(0, 0, 0, 0.04);
    color: #4b5563;
    border: 1px solid rgba(0, 0, 0, 0.06);
    transition: all 0.25s ease;
  }

  :global(.dark) .project-tag {
    background: rgba(255, 255, 255, 0.06);
    color: #d1d5db;
    border-color: rgba(255, 255, 255, 0.08);
  }

  .project-card:hover .project-tag {
    background: rgba(100, 160, 200, 0.07);
    color: #4a8db8;
    border-color: rgba(100, 160, 200, 0.12);
  }

  :global(.dark) .project-card:hover .project-tag {
    background: rgba(120, 170, 210, 0.08);
    color: #9ab0c8;
    border-color: rgba(120, 170, 210, 0.12);
  }
</style>
